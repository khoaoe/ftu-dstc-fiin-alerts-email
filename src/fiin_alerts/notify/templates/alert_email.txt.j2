Trade Signal Alerts (Gmail API)
Total alerts: {{ alerts|length }}
Tickers: {{ alerts|map(attribute='ticker')|unique|join(', ') }}

By event type:
{% set event_labels = {
  'BUY_NEW': 'Buy New',
  'BUY': 'Buy',
  'SELL_TP': 'Sell (TP)',
  'SELL': 'Sell',
  'RISK': 'Risk',
  'TP': 'Take Profit',
  'SL': 'Stop Loss',
  'INFO': 'Info',
  'ALERT': 'Alert'
} %}
{% for group in alerts|groupby('event_type') %}
- {{ event_labels.get(group.grouper, group.grouper) }}: {{ group.list|length }}
{% endfor %}

Details:
{% for a in alerts %}
{{ loop.index }}. {{ a.ticker }} – {{ event_labels.get(a.event_type, a.event_type) }}
   Action: {% if a.event_type.startswith('BUY') %}buy{% elif a.event_type.startswith('SELL') %}sell{% else %}-{% endif %}
   Price: {% if a.price is not none %}{{ '%.2f'|format(a.price) }}{% else %}-{% endif %}
   Time: {{ a.when or '-' }}
   Notes: {{ a.explain or '-' }}
{% endfor %}

Note: Signals are aggregated from multiple models. Please double-check before trading.
